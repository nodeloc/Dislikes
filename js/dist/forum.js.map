{"version":3,"file":"forum.js","mappings":"MACA,IAAIA,EAAsB,CCA1BA,EAAyBC,IACxB,IAAIC,EAASD,GAAUA,EAAOE,WAC7B,IAAOF,EAAiB,QACxB,IAAM,EAEP,OADAD,EAAoBI,EAAEF,EAAQ,CAAEG,EAAGH,IAC5BA,CAAM,ECLdF,EAAwB,CAACM,EAASC,KACjC,IAAI,IAAIC,KAAOD,EACXP,EAAoBS,EAAEF,EAAYC,KAASR,EAAoBS,EAAEH,EAASE,IAC5EE,OAAOC,eAAeL,EAASE,EAAK,CAAEI,YAAY,EAAMC,IAAKN,EAAWC,IAE1E,ECNDR,EAAwB,CAACc,EAAKC,IAAUL,OAAOM,UAAUC,eAAeC,KAAKJ,EAAKC,GCClFf,EAAyBM,IACH,oBAAXa,QAA0BA,OAAOC,aAC1CV,OAAOC,eAAeL,EAASa,OAAOC,YAAa,CAAEC,MAAO,WAE7DX,OAAOC,eAAeL,EAAS,aAAc,CAAEe,OAAO,GAAO,G,qDCL9D,MAAM,EAA+BC,OAAOC,KAAKC,OAAO,iBCAlD,EAA+BF,OAAOC,KAAKC,OAAO,a,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,qC,aCAxD,SAASC,EAAgBC,EAAGC,GAC1B,OAAOF,EAAkBf,OAAOkB,eAAiBlB,OAAOkB,eAAeC,OAAS,SAAUH,EAAGC,GAC3F,OAAOD,EAAEI,UAAYH,EAAGD,CAC1B,EAAGD,EAAgBC,EAAGC,EACxB,CCHA,SAASI,EAAeL,EAAGjB,GACzBiB,EAAEV,UAAYN,OAAOsB,OAAOvB,EAAEO,WAAYU,EAAEV,UAAUiB,YAAcP,EAAGE,EAAeF,EAAGjB,EAC3F,CCHA,MAAM,EAA+Ba,OAAOC,KAAKC,OAAO,4B,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,gC,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,2B,aCOlDU,EAAwB,SAAAC,GAAA,SAAAD,IAAA,OAAAC,EAAAC,MAAA,KAAAC,YAAA,KAAAN,EAAAG,EAAAC,GAAA,IAAAG,EAAAJ,EAAAlB,UAmC3B,OAnC2BsB,EAC5BC,OAAA,SAAOC,GACLL,EAAAnB,UAAMuB,OAAMrB,KAAC,KAAAsB,GACbC,KAAKC,WAAaD,KAAKE,MAAMD,UAC/B,EAACJ,EAEDM,UAAA,WACE,MAAO,uCACT,EAACN,EAEDO,MAAA,WACE,OAAOC,IAAAA,WAAeC,MAAMN,KAAKC,WAC7B,sDACA,oDAEN,EAACJ,EAEDU,QAAA,WACE,OACEC,EAAA,OAAKL,UAAU,cACbK,EAAA,SAAIH,IAAAA,WAAeC,MAAMN,KAAKC,WACxB,qDACA,qDAENO,EAAA,OAAKL,UAAU,cACZM,IAAAA,UAAiB,CAChBN,UAAW,uCACXO,QAASV,KAAKE,MAAMS,WACnBN,IAAAA,WAAeC,MAAMN,KAAKC,WACzB,2CACA,4CAKZ,EAACR,CAAA,CAnC2B,CAASmB,KCPvC,MAAM,EAA+B/B,OAAOC,KAAKC,OAAO,0B,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,kC,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,2B,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,uB,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,yB,aCAxD,SAAS8B,IACP,OAAOA,EAAW5C,OAAO6C,OAAS7C,OAAO6C,OAAO1B,OAAS,SAAU2B,GACjE,IAAK,IAAI7B,EAAI,EAAGA,EAAIU,UAAUoB,OAAQ9B,IAAK,CACzC,IAAID,EAAIW,UAAUV,GAClB,IAAK,IAAI+B,KAAKhC,GAAG,CAAG,GAAET,eAAeC,KAAKQ,EAAGgC,KAAOF,EAAEE,GAAKhC,EAAEgC,GAC/D,CACA,OAAOF,CACT,EAAGF,EAASlB,MAAM,KAAMC,UAC1B,CCRA,SAASsB,EAAQlD,GAGf,OAAOkD,EAAU,mBAAqBxC,QAAU,iBAAmBA,OAAOyC,SAAW,SAAUnD,GAC7F,cAAcA,CAChB,EAAI,SAAUA,GACZ,OAAOA,GAAK,mBAAqBU,QAAUV,EAAEwB,cAAgBd,QAAUV,IAAMU,OAAOH,UAAY,gBAAkBP,CACpH,EAAGkD,EAAQlD,EACb,CCNA,SAASoD,EAAcnC,GACrB,IAAIoC,ECFN,SAAqBpC,EAAGgC,GACtB,GAAI,UAAYC,EAAQjC,KAAOA,EAAG,OAAOA,EACzC,IAAIC,EAAID,EAAEP,OAAO4C,aACjB,QAAI,IAAWpC,EAAG,CAChB,IAAImC,EAAInC,EAAET,KAAKQ,EAAGgC,UAClB,GAAI,UAAYC,EAAQG,GAAI,OAAOA,EACnC,MAAM,IAAIE,UAAU,+CACtB,CACA,OAAyBC,OAAiBvC,EAC5C,CDPUqC,CAAYrC,GACpB,MAAO,UAAYiC,EAAQG,GAAKA,EAAIA,EAAI,EAC1C,CEJA,SAASI,EAAkBvC,EAAG+B,GAC5B,IAAK,IAAIhC,EAAI,EAAGA,EAAIgC,EAAED,OAAQ/B,IAAK,CACjC,IAAIjB,EAAIiD,EAAEhC,GACVjB,EAAEG,WAAaH,EAAEG,aAAc,EAAIH,EAAE0D,cAAe,EAAI,UAAW1D,IAAMA,EAAE2D,UAAW,GAAK1D,OAAOC,eAAegB,EAAGkC,EAAcpD,EAAED,KAAMC,EAC5I,CACF,CCNA,MAAM,EAA+Ba,OAAOC,KAAKC,OAAO,oC,ICanC6C,EAAsB,SAAAC,GACzC,SAAAD,EAAYE,EAAWC,GAG2B,YAHf,IAAZA,IAAAA,EAAe,GAGpCD,EAAOC,KAAIlB,EAAA,GAASiB,EAAOC,MAAQ,CAAC,EAAC,CAAGC,MAF1B,KAIdH,EAAApD,KAAA,KAAMqD,EAAQC,EAJA,KAIY,IAC5B,CAAC,OAAAzC,EAAAsC,EAAAC,GFbmB3C,EEanB0C,GFbsBX,EEatB,EAAAlD,IAAA,OAAAK,IAED,WACE,MAAO,OACT,MFhBYqD,EAAkBvC,EAAEX,UAAW0C,GAAkChD,OAAOC,eAAegB,EAAG,YAAa,CACjHyC,UAAU,IACRzC,EAHN,IAAsBA,EAAG+B,CEiBtB,CAXwC,C,MAA8EgB,ICbzH,MAAM,EAA+BpD,OAAOC,KAAKC,OAAO,sC,aCgBnCmD,EAAiB,SAAAxC,GAAA,SAAAwC,IAAA,OAAAxC,EAAAC,MAAA,KAAAC,YAAA,KAAAN,EAAA4C,EAAAxC,GAAA,IAAAG,EAAAqC,EAAA3D,UAsDnC,OAtDmCsB,EACpCC,OAAA,SAAOC,GACLL,EAAAnB,UAAMuB,OAAMrB,KAAC,KAAAsB,GAEbC,KAAKmC,MAAQ,IAAIP,EAAuB,CACtCQ,OAAQ,CACNC,SAAUrC,KAAKE,MAAMoC,KAAKC,QAI9BvC,KAAKmC,MAAMK,SACb,EAAC3C,EAEDM,UAAA,WACE,MAAO,gCACT,EAACN,EAEDO,MAAA,WACE,OAAOC,IAAAA,WAAeC,MAAM,6CAC9B,EAACT,EAEDU,QAAA,WAAU,IAAAkC,EAAA,KACR,OACEjC,EAAAkC,IAAA,KACElC,EAAA,OAAKL,UAAU,cACZH,KAAKmC,MAAMQ,mBACVnC,EAACoC,IAAgB,MAEjBpC,EAAA,MAAIL,UAAU,0BACXH,KAAKmC,MAAMU,WAAWC,KAAI,SAACf,GAAI,OAC9BA,EAAKgB,MAAMD,KAAI,SAACE,GAAI,OAClBxC,EAAA,UACEA,EAACyC,IAAI,CAACC,KAAM7C,IAAAA,MAAU2C,KAAKA,IACxBG,IAAOH,GAAM,IAAEI,IAASJ,IAExB,GACL,MAKThD,KAAKmC,MAAMkB,UACV7C,EAAA,OAAKL,UAAU,gBACbK,EAAA,OAAKL,UAAU,uBACbK,EAAA,OAAKL,UAAU,cACbK,EAACC,IAAM,CAACN,UAAU,uBAAuBO,QAAS,kBAAM+B,EAAKN,MAAMmB,UAAU,EAAEC,QAASvD,KAAKmC,MAAMqB,iBAChGnD,IAAAA,WAAeC,MAAM,6DAK5B,KAGV,EAAC4B,CAAA,CAtDmC,CAAgFtB,KChBtH,MAAM,EAA+B/B,OAAOC,KAAKC,OAAO,iC,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,uBCEF,IAEjC0E,EAAwB,SAAAC,GAAA,SAAAD,IAAA,OAAAC,EAAA/D,MAAA,KAAAC,YAAA,KAAAN,EAAAmE,EAAAC,GAAA,IAAA7D,EAAA4D,EAAAlF,UAkB1C,OAlB0CsB,EAC3C8D,KAAA,WACE,MAAO,oBACT,EAAC9D,EAEDqD,KAAA,WACE,OAAO7C,IAAAA,MAAUiC,KAAKtC,KAAKE,MAAM0D,aAAaC,UAChD,EAAChE,EAEDU,QAAA,WACE,IACMyC,EADehD,KAAKE,MAAM0D,aACNE,WAE1B,OAAOzD,IAAAA,WAAeC,MAAM,0DAA2D,CAAE0C,KAAAA,EAAMe,MAAO,GACxG,EAAClE,EAEDmE,QAAA,WACE,OAAOC,EAAAA,EAAAA,UAASjE,KAAKE,MAAM0D,aAAaC,UAAUK,eAAgB,IACpE,EAACT,CAAA,CAlB0C,CAASU,KCJtD,MAAM,EAA+BtF,OAAOC,KAAKC,OAAO,6B,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,gC,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,oB,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,sB,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,kC,ICMnCqF,EAAgB,SAAAC,GAAA,SAAAD,IAAA,OAAAC,EAAA1E,MAAA,KAAAC,YAAA,KAgBlC,OAhBkCN,EAAA8E,EAAAC,GAAAD,EAAA7F,UAOnC+F,YAAA,SAAYC,GACV,OAAOlE,IAAAA,MAAUmE,KAAK,QAAS,CAC7BpC,OAAQ,CACNqC,KAAM,UACNC,WAAY1E,KAAKgD,KAAKT,MAExBR,KAAM,CAAEwC,OAAAA,EAAQvC,MAAOhC,KAAK2E,WAC5BC,KAAM,cAEV,EAACR,CAAA,CAhBkC,C,MAASS,ICD9C,UACE,IAAIC,IAAAA,SACDC,IAAI,gBAAiB,wBAAyBX,GAEjD,IAAIU,IAAAA,OAAaE,KACdC,QAAc,YACdC,UAAkB,iBAClBA,UAAmB,eCDxB7E,IAAAA,aAAiB0E,IAAI,oBAAoB,WACvC1E,IAAAA,uBAA2B8E,aAAe1B,GzBkC1C2B,EAAAA,EAAAA,QAAOC,IAAAA,UAAuB,eAAe,SAAUtC,GACrD,IAAMT,EAAOtC,KAAKE,MAAMoC,KAExB,IAAIA,EAAKgD,YAAehD,EAAKiD,aAA7B,CAEA,IAAMC,EAAWlD,EAAKkD,WAClBvF,EAAaI,IAAAA,QAAY2C,MAAQwC,GAAYA,EAASC,MAAK,SAACzC,GAAI,OAAKA,IAAS3C,IAAAA,QAAY2C,IAAI,IAElGD,EAAMgC,IACJ,UACAvE,EAACC,IAAM,CACLN,UAAU,sBACVO,QAAS,WAIPL,IAAAA,MAAUqF,KAAKjG,EAA0B,CACvCQ,WAAYA,EACZ0F,WAJiB,EAKjBhF,UAAW,WACTV,GAAcA,EACdqC,EAAKsD,KAAK,CAAE3F,WAAAA,IAGZ,IAAM4F,EAAOvD,EAAKuD,KAAKC,cAAcN,SAASK,KAC9C,GAAI5F,EACF4F,EAAKE,QAAQ,CAAEtB,KAAM,QAASlC,GAAIlC,IAAAA,QAAY2C,KAAKT,WAC9C,CACL,IAAMyD,EAAQH,EAAKI,WAAU,SAAAC,GAAO,OAAIA,EAAQ3D,KAAOlC,IAAAA,QAAY2C,KAAKT,IAAI,KAC7D,IAAXyD,GACFH,EAAKM,OAAOH,EAAO,EAEvB,CAEA3F,IAAAA,MAAU+F,OACZ,GAEJ,GAEC/F,IAAAA,WAAeC,MAAML,EAAa,6CAA+C,6CApCrC,CAuCnD,K0B5EAmF,EAAAA,EAAAA,QAAOC,IAAAA,UAAuB,eAAe,SAAUtC,GACrD,IAAMT,EAAOtC,KAAKE,MAAMoC,KAClBkD,EAAWlD,EAAKkD,WAEtB,GAAIA,GAAYA,EAASxE,OAAQ,CAC/B,IACMqF,EAAY/D,EAAKgE,gBADT,EAKRC,EAAQf,EACXZ,MAAK,SAAChH,GAAC,OAAMA,IAAMyC,IAAAA,QAAY2C,MAAQ,EAAI,CAAC,IAC5CwD,MAAM,EAAGH,EAAYrE,EAPV,GAQXc,KAAI,SAACE,GACJ,OACExC,EAACyC,IAAI,CAACC,KAAM7C,IAAAA,MAAU2C,KAAKA,IACxBA,IAAS3C,IAAAA,QAAY2C,KAAO3C,IAAAA,WAAeC,MAAM,wCAA0C8C,IAASJ,GAG3G,IAKF,GAAIqD,EAAW,CACb,IAAMtC,EAAQzB,EAAKgE,gBAAkBC,EAAMvF,OACrCyF,EAAQpG,IAAAA,WAAeC,MAAM,0CAA2C,CAAEyD,MAAAA,IAE5E1D,IAAAA,MAAU6E,UAAU,kBACtBqB,EAAMG,KACJlG,EAACC,IAAM,CACLN,UAAU,uCACVO,QAAS,SAACxB,GACRA,EAAEyH,iBACFtG,IAAAA,MAAUqF,KAAKxD,EAAmB,CAAEI,KAAAA,GACtC,GAECmE,IAILF,EAAMG,KAAKlG,EAAA,YAAOiG,GAEtB,CAEA1D,EAAMgC,IACJ,WACAvE,EAAA,OAAKL,UAAU,mBACZwD,IAAK,sBACLtD,IAAAA,WAAeC,MAAM,2CAA0CkF,EAAS,KAAOnF,IAAAA,QAAY2C,KAAO,QAAU,IAAE,QAAS,CACtHe,MAAOwC,EAAMvF,OACb4F,MAAOC,IAAgBN,MAI/B,CACF,KC5DAnB,EAAAA,EAAAA,QAAO0B,IAAAA,UAAoB,YAAY,SAAU/D,GAC/C,IAAMC,EAAOhD,KAAKgD,KAClBD,EAAMgC,IACJ,WACAvE,EAACuG,IAAU,CAAC7D,KAAM7C,IAAAA,MAAU,gBAAiB,CAAE+C,SAAc,MAAJJ,OAAI,EAAJA,EAAMgE,SAAWrD,KAAK,sBAC5EtD,IAAAA,WAAeC,MAAM,8CAExB,GAEJ,KFCA8E,EAAAA,EAAAA,QAAO6B,IAAAA,UAA4B,qBAAqB,SAAUlE,GAChEA,EAAMgC,IAAI,eAAgB,CACxBmC,KAAM,eACNvD,KAAM,qBACN8C,MAAOpG,IAAAA,WAAeC,MAAM,+DAEhC,GACF,G","sources":["webpack://@nodeloc/dislikes/webpack/bootstrap","webpack://@nodeloc/dislikes/webpack/runtime/compat get default export","webpack://@nodeloc/dislikes/webpack/runtime/define property getters","webpack://@nodeloc/dislikes/webpack/runtime/hasOwnProperty shorthand","webpack://@nodeloc/dislikes/webpack/runtime/make namespace object","webpack://@nodeloc/dislikes/external root \"flarum.core.compat['common/extend']\"","webpack://@nodeloc/dislikes/external root \"flarum.core.compat['forum/app']\"","webpack://@nodeloc/dislikes/external root \"flarum.core.compat['forum/components/NotificationGrid']\"","webpack://@nodeloc/dislikes/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@nodeloc/dislikes/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@nodeloc/dislikes/external root \"flarum.core.compat['common/components/Button']\"","webpack://@nodeloc/dislikes/external root \"flarum.core.compat['forum/components/CommentPost']\"","webpack://@nodeloc/dislikes/external root \"flarum.core.compat['common/components/Modal']\"","webpack://@nodeloc/dislikes/./src/forum/addDislikeAction.js","webpack://@nodeloc/dislikes/external root \"flarum.core.compat['common/components/Link']\"","webpack://@nodeloc/dislikes/external root \"flarum.core.compat['common/helpers/punctuateSeries']\"","webpack://@nodeloc/dislikes/external root \"flarum.core.compat['common/helpers/username']\"","webpack://@nodeloc/dislikes/external root \"flarum.core.compat['common/helpers/icon']\"","webpack://@nodeloc/dislikes/external root \"flarum.core.compat['common/helpers/avatar']\"","webpack://@nodeloc/dislikes/./node_modules/@babel/runtime/helpers/esm/extends.js","webpack://@nodeloc/dislikes/./node_modules/@babel/runtime/helpers/esm/typeof.js","webpack://@nodeloc/dislikes/./node_modules/@babel/runtime/helpers/esm/toPropertyKey.js","webpack://@nodeloc/dislikes/./node_modules/@babel/runtime/helpers/esm/toPrimitive.js","webpack://@nodeloc/dislikes/./node_modules/@babel/runtime/helpers/esm/createClass.js","webpack://@nodeloc/dislikes/external root \"flarum.core.compat['common/states/PaginatedListState']\"","webpack://@nodeloc/dislikes/./src/forum/states/PostDislikesModalState.ts","webpack://@nodeloc/dislikes/external root \"flarum.core.compat['common/components/LoadingIndicator']\"","webpack://@nodeloc/dislikes/./src/forum/components/PostDislikesModal.tsx","webpack://@nodeloc/dislikes/external root \"flarum.core.compat['forum/components/Notification']\"","webpack://@nodeloc/dislikes/external root \"flarum.core.compat['common/utils/string']\"","webpack://@nodeloc/dislikes/./src/forum/components/PostDislikedNotification.js","webpack://@nodeloc/dislikes/external root \"flarum.core.compat['forum/components/UserPage']\"","webpack://@nodeloc/dislikes/external root \"flarum.core.compat['common/components/LinkButton']\"","webpack://@nodeloc/dislikes/external root \"flarum.core.compat['common/extenders']\"","webpack://@nodeloc/dislikes/external root \"flarum.core.compat['common/models/Post']\"","webpack://@nodeloc/dislikes/external root \"flarum.core.compat['forum/components/PostsUserPage']\"","webpack://@nodeloc/dislikes/./src/forum/components/DislikesUserPage.tsx","webpack://@nodeloc/dislikes/./src/forum/extend.ts","webpack://@nodeloc/dislikes/./src/forum/index.js","webpack://@nodeloc/dislikes/./src/forum/addDislikesList.js","webpack://@nodeloc/dislikes/./src/forum/addDislikesTabToUserProfile.tsx"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/extend'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/app'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/NotificationGrid'];","function _setPrototypeOf(t, e) {\n  return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) {\n    return t.__proto__ = e, t;\n  }, _setPrototypeOf(t, e);\n}\nexport { _setPrototypeOf as default };","import setPrototypeOf from \"./setPrototypeOf.js\";\nfunction _inheritsLoose(t, o) {\n  t.prototype = Object.create(o.prototype), t.prototype.constructor = t, setPrototypeOf(t, o);\n}\nexport { _inheritsLoose as default };","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Button'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/CommentPost'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Modal'];","import { extend } from 'flarum/common/extend';\nimport app from 'flarum/forum/app';\nimport Button from 'flarum/common/components/Button';\nimport CommentPost from 'flarum/forum/components/CommentPost';\nimport Modal from 'flarum/common/components/Modal';\n\n// 更新确认对话框组件\nclass DislikeConfirmationModal extends Modal {\n  oninit(vnode) {\n    super.oninit(vnode);\n    this.isDisliked = this.attrs.isDisliked;\n  }\n\n  className() {\n    return 'DislikeConfirmationModal Modal--small';\n  }\n\n  title() {\n    return app.translator.trans(this.isDisliked\n      ? 'nodeloc-dislikes.forum.undislike_confirmation_title'\n      : 'nodeloc-dislikes.forum.dislike_confirmation_title'\n    );\n  }\n\n  content() {\n    return (\n      <div className=\"Modal-body\">\n        <p>{app.translator.trans(this.isDisliked\n            ? 'nodeloc-dislikes.forum.undislike_confirmation_text'\n            : 'nodeloc-dislikes.forum.dislike_confirmation_text'\n        )}</p>\n        <div className=\"Form-group\">\n          {Button.component({\n            className: 'Button Button--primary Button--block',\n            onclick: this.attrs.onconfirm,\n          }, app.translator.trans(this.isDisliked\n            ? 'nodeloc-dislikes.forum.confirm_undislike'\n            : 'nodeloc-dislikes.forum.confirm_dislike'\n          ))}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default function () {\n  extend(CommentPost.prototype, 'actionItems', function (items) {\n    const post = this.attrs.post;\n\n    if (post.isHidden() || !post.canDislike()) return;\n\n    const dislikes = post.dislikes();\n    let isDisliked = app.session.user && dislikes && dislikes.some((user) => user === app.session.user);\n\n    items.add(\n      'dislike',\n      <Button\n        className=\"Button Button--link\"\n        onclick={() => {\n          // 假设能量消耗是固定的，您需要根据实际情况设置这个值\n          const energyCost = 5;\n\n          app.modal.show(DislikeConfirmationModal, {\n            isDisliked: isDisliked,\n            energyCost: energyCost,\n            onconfirm: () => {\n              isDisliked = !isDisliked;\n              post.save({ isDisliked });\n\n              // 更新关系数据\n              const data = post.data.relationships.dislikes.data;\n              if (isDisliked) {\n                data.unshift({ type: 'users', id: app.session.user.id() });\n              } else {\n                const index = data.findIndex(dislike => dislike.id === app.session.user.id());\n                if (index !== -1) {\n                  data.splice(index, 1);\n                }\n              }\n\n              app.modal.close();\n            },\n          });\n        }}\n      >\n        {app.translator.trans(isDisliked ? 'nodeloc-dislikes.forum.post.undislike_link' : 'nodeloc-dislikes.forum.post.dislike_link')}\n      </Button>\n    );\n  });\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Link'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/punctuateSeries'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/username'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/icon'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/avatar'];","function _extends() {\n  return _extends = Object.assign ? Object.assign.bind() : function (n) {\n    for (var e = 1; e < arguments.length; e++) {\n      var t = arguments[e];\n      for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]);\n    }\n    return n;\n  }, _extends.apply(null, arguments);\n}\nexport { _extends as default };","function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, _typeof(o);\n}\nexport { _typeof as default };","import _typeof from \"./typeof.js\";\nimport toPrimitive from \"./toPrimitive.js\";\nfunction toPropertyKey(t) {\n  var i = toPrimitive(t, \"string\");\n  return \"symbol\" == _typeof(i) ? i : i + \"\";\n}\nexport { toPropertyKey as default };","import _typeof from \"./typeof.js\";\nfunction toPrimitive(t, r) {\n  if (\"object\" != _typeof(t) || !t) return t;\n  var e = t[Symbol.toPrimitive];\n  if (void 0 !== e) {\n    var i = e.call(t, r || \"default\");\n    if (\"object\" != _typeof(i)) return i;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (\"string\" === r ? String : Number)(t);\n}\nexport { toPrimitive as default };","import toPropertyKey from \"./toPropertyKey.js\";\nfunction _defineProperties(e, r) {\n  for (var t = 0; t < r.length; t++) {\n    var o = r[t];\n    o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, toPropertyKey(o.key), o);\n  }\n}\nfunction _createClass(e, r, t) {\n  return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", {\n    writable: !1\n  }), e;\n}\nexport { _createClass as default };","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/states/PaginatedListState'];","import PaginatedListState, { PaginatedListParams } from 'flarum/common/states/PaginatedListState';\nimport User from 'flarum/common/models/User';\n\nexport interface PostDislikesModalListParams extends PaginatedListParams {\n  filter: {\n    disliked: string;\n  };\n  page?: {\n    offset?: number;\n    limit: number;\n  };\n}\n\nexport default class PostDislikesModalState<P extends PostDislikesModalListParams = PostDislikesModalListParams> extends PaginatedListState<User, P> {\n  constructor(params: P, page: number = 1) {\n    const limit = 10;\n\n    params.page = { ...(params.page || {}), limit };\n\n    super(params, page, limit);\n  }\n\n  get type(): string {\n    return 'users';\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/LoadingIndicator'];","import app from 'flarum/forum/app';\nimport Modal from 'flarum/common/components/Modal';\nimport Link from 'flarum/common/components/Link';\nimport avatar from 'flarum/common/helpers/avatar';\nimport username from 'flarum/common/helpers/username';\nimport type { IInternalModalAttrs } from 'flarum/common/components/Modal';\nimport type Post from 'flarum/common/models/Post';\nimport type Mithril from 'mithril';\nimport PostDislikesModalState from '../states/PostDislikesModalState';\nimport Button from 'flarum/common/components/Button';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\n\nexport interface IPostDislikesModalAttrs extends IInternalModalAttrs {\n  post: Post;\n}\n\nexport default class PostDislikesModal<CustomAttrs extends IPostDislikesModalAttrs = IPostDislikesModalAttrs> extends Modal<CustomAttrs, PostDislikesModalState> {\n  oninit(vnode: Mithril.VnodeDOM<CustomAttrs, this>) {\n    super.oninit(vnode);\n\n    this.state = new PostDislikesModalState({\n      filter: {\n        disliked: this.attrs.post.id()!,\n      },\n    });\n\n    this.state.refresh();\n  }\n\n  className() {\n    return 'PostDislikesModal Modal--small';\n  }\n\n  title() {\n    return app.translator.trans('nodeloc-dislikes.forum.post_dislikes.title');\n  }\n\n  content() {\n    return (\n      <>\n        <div className=\"Modal-body\">\n          {this.state.isInitialLoading() ? (\n            <LoadingIndicator />\n          ) : (\n            <ul className=\"PostDislikesModal-list\">\n              {this.state.getPages().map((page) =>\n                page.items.map((user) => (\n                  <li>\n                    <Link href={app.route.user(user)}>\n                      {avatar(user)} {username(user)}\n                    </Link>\n                  </li>\n                ))\n              )}\n            </ul>\n          )}\n        </div>\n        {this.state.hasNext() ? (\n          <div className=\"Modal-footer\">\n            <div className=\"Form Form--centered\">\n              <div className=\"Form-group\">\n                <Button className=\"Button Button--block\" onclick={() => this.state.loadNext()} loading={this.state.isLoadingNext()}>\n                  {app.translator.trans('nodeloc-dislikes.forum.post_dislikes.load_more_button')}\n                </Button>\n              </div>\n            </div>\n          </div>\n        ) : null}\n      </>\n    );\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/Notification'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/string'];","import app from 'flarum/forum/app';\nimport Notification from 'flarum/forum/components/Notification';\nimport { truncate } from 'flarum/common/utils/string';\n\nexport default class PostDislikedNotification extends Notification {\n  icon() {\n    return 'far fa-thumbs-down';\n  }\n\n  href() {\n    return app.route.post(this.attrs.notification.subject());\n  }\n\n  content() {\n    const notification = this.attrs.notification;\n    const user = notification.fromUser();\n\n    return app.translator.trans('nodeloc-dislikes.forum.notifications.post_disliked_text', { user, count: 1 });\n  }\n\n  excerpt() {\n    return truncate(this.attrs.notification.subject().contentPlain(), 200);\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/UserPage'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/LinkButton'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/extenders'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/models/Post'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/PostsUserPage'];","import app from 'flarum/forum/app';\nimport PostsUserPage from 'flarum/forum/components/PostsUserPage';\n\n/**\n * The `DislikesUserPage` component shows posts which user the user disliked.\n */\nexport default class DislikesUserPage extends PostsUserPage {\n  /**\n   * Load a new page of the user's activity feed.\n   *\n   * @param offset The position to start getting results from.\n   * @protected\n   */\n  loadResults(offset: number) {\n    return app.store.find('posts', {\n      filter: {\n        type: 'comment',\n        dislikedBy: this.user.id(),\n      },\n      page: { offset, limit: this.loadLimit },\n      sort: '-createdAt',\n    });\n  }\n}\n","import Extend from 'flarum/common/extenders';\nimport Post from 'flarum/common/models/Post';\nimport User from 'flarum/common/models/User';\nimport DislikesUserPage from './components/DislikesUserPage';\n\nexport default [\n  new Extend.Routes() //\n    .add('user.dislikes', '/u/:username/dislikes', DislikesUserPage),\n\n  new Extend.Model(Post) //\n    .hasMany<User>('dislikes')\n    .attribute<number>('dislikesCount')\n    .attribute<boolean>('canDislike'),\n];\n","import { extend } from 'flarum/common/extend';\nimport app from 'flarum/forum/app';\nimport NotificationGrid from 'flarum/forum/components/NotificationGrid';\n\nimport addDislikeAction from './addDislikeAction';\nimport addDislikesList from './addDislikesList';\nimport PostDislikedNotification from './components/PostDislikedNotification';\nimport addDislikesTabToUserProfile from './addDislikesTabToUserProfile';\n\nexport { default as extend } from './extend';\n\napp.initializers.add('nodeloc-dislikes', () => {\n  app.notificationComponents.postDisliked = PostDislikedNotification;\n\n  addDislikeAction();\n  addDislikesList();\n  addDislikesTabToUserProfile();\n\n  extend(NotificationGrid.prototype, 'notificationTypes', function (items) {\n    items.add('postDisliked', {\n      name: 'postDisliked',\n      icon: 'far fa-thumbs-down',\n      label: app.translator.trans('nodeloc-dislikes.forum.settings.notify_post_disliked_label'),\n    });\n  });\n});\n","import { extend } from 'flarum/common/extend';\nimport app from 'flarum/forum/app';\nimport CommentPost from 'flarum/forum/components/CommentPost';\nimport Link from 'flarum/common/components/Link';\nimport punctuateSeries from 'flarum/common/helpers/punctuateSeries';\nimport username from 'flarum/common/helpers/username';\nimport icon from 'flarum/common/helpers/icon';\nimport Button from 'flarum/common/components/Button';\n\nimport PostDislikesModal from './components/PostDislikesModal';\n\nexport default function () {\n  extend(CommentPost.prototype, 'footerItems', function (items) {\n    const post = this.attrs.post;\n    const dislikes = post.dislikes();\n\n    if (dislikes && dislikes.length) {\n      const limit = 4;\n      const overLimit = post.dislikesCount() > limit;\n\n      // Construct a list of names of users who have disliked this post. Make sure the\n      // current user is first in the list, and cap a maximum of 4 items.\n      const names = dislikes\n        .sort((a) => (a === app.session.user ? -1 : 1))\n        .slice(0, overLimit ? limit - 1 : limit)\n        .map((user) => {\n          return (\n            <Link href={app.route.user(user)}>\n              {user === app.session.user ? app.translator.trans('nodeloc-dislikes.forum.post.you_text') : username(user)}\n            </Link>\n          );\n        });\n\n      // If there are more users that we've run out of room to display, add a \"x\n      // others\" name to the end of the list. Clicking on it will display a modal\n      // with a full list of names.\n      if (overLimit) {\n        const count = post.dislikesCount() - names.length;\n        const label = app.translator.trans('nodeloc-dislikes.forum.post.others_link', { count });\n\n        if (app.forum.attribute('canSearchUsers')) {\n          names.push(\n            <Button\n              className=\"Button Button--ua-reset Button--text\"\n              onclick={(e) => {\n                e.preventDefault();\n                app.modal.show(PostDislikesModal, { post });\n              }}\n            >\n              {label}\n            </Button>\n          );\n        } else {\n          names.push(<span>{label}</span>);\n        }\n      }\n\n      items.add(\n        'disliked',\n        <div className=\"Post-dislikedBy\">\n          {icon('far fa-thumbs-down')}\n          {app.translator.trans(`nodeloc-dislikes.forum.post.disliked_by${dislikes[0] === app.session.user ? '_self' : ''}_text`, {\n            count: names.length,\n            users: punctuateSeries(names),\n          })}\n        </div>\n      );\n    }\n  });\n}\n","import { extend } from 'flarum/common/extend';\nimport app from 'flarum/forum/app';\nimport UserPage from 'flarum/forum/components/UserPage';\nimport LinkButton from 'flarum/common/components/LinkButton';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport type Mithril from 'mithril';\n\nexport default function addDislikesTabToUserProfile() {\n  extend(UserPage.prototype, 'navItems', function (items: ItemList<Mithril.Children>) {\n    const user = this.user;\n    items.add(\n      'dislikes',\n      <LinkButton href={app.route('user.dislikes', { username: user?.slug() })} icon=\"far fa-thumbs-down\">\n        {app.translator.trans('nodeloc-dislikes.forum.user.dislikes_link')}\n      </LinkButton>,\n      88\n    );\n  });\n}\n"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","flarum","core","compat","_setPrototypeOf","t","e","setPrototypeOf","bind","__proto__","_inheritsLoose","create","constructor","DislikeConfirmationModal","_Modal","apply","arguments","_proto","oninit","vnode","this","isDisliked","attrs","className","title","app","trans","content","m","Button","onclick","onconfirm","Modal","_extends","assign","n","length","r","_typeof","iterator","toPropertyKey","i","toPrimitive","TypeError","String","_defineProperties","configurable","writable","PostDislikesModalState","_PaginatedListState","params","page","limit","PaginatedListState","PostDislikesModal","state","filter","disliked","post","id","refresh","_this","'['","isInitialLoading","LoadingIndicator","getPages","map","items","user","Link","href","avatar","username","hasNext","loadNext","loading","isLoadingNext","PostDislikedNotification","_Notification","icon","notification","subject","fromUser","count","excerpt","truncate","contentPlain","Notification","DislikesUserPage","_PostsUserPage","loadResults","offset","find","type","dislikedBy","loadLimit","sort","PostsUserPage","Extend","add","Post","hasMany","attribute","postDisliked","extend","CommentPost","isHidden","canDislike","dislikes","some","show","energyCost","save","data","relationships","unshift","index","findIndex","dislike","splice","close","overLimit","dislikesCount","names","slice","label","push","preventDefault","users","punctuateSeries","UserPage","LinkButton","slug","NotificationGrid","name"],"sourceRoot":""}